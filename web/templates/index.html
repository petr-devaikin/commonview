{% extends "layout.html" %}


{% block style %}
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/index.css') }}">

    {% if g.authorized %}

    {% endif %}
{% endblock %}


{% block script %}
    {% if g.authorized %}
        <script>
            require(['index', 'upload'], function(index, upload) {
                index();
                upload();
            })
        </script>
    {% endif %}
{% endblock %}


{% block body %}
    <div id="leftColumn">&nbsp;</div>
    <div id="rightColumn">
        {% if not g.authorized %}
            <p>
                Make your own pazzle
            </p>
            <ul>
                <li><a href="{{ url_for('login') }}">Log in</a> via Instagram</li>
                <li>Upload an image (jpeg, png, gif)</li>
                <li>Choose a hashtag to find pazzle elements</li>
                <li>Start compiling and enjoy the process</li>
                <li>Share your pazzle</li>
            </ul>
        {% else %}
            <div id="uploader"></div>

            <p>You can upload up to 3 pictures</p>
            <div id="pictures">
                <div class="picture" id="new">
                    <div class="original"></div>
                    + Drug and drop picture to upload <br />
                    Maximum size is 555 Mb, allowed extentions are JPEG, PNG and OLOLO.
                </div>
                {% for p in g.user.pictures %}
                    <div class="picture">
                        <a href="{{ url_for('render', id=p.id) }}">
                            <div class="original"></div>
                        </a>
                        <p class="tag">#{{ p.tag }}</p>
                        <p class="accurancy">Accurancy: {{ p.diff_percentage() }}%</p>

                        <a class="delete" href="{{ url_for('palette', id=p.id) }}">Delete</a>
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    </div>
{% endblock %}