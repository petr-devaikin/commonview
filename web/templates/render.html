{% extends "layout.html" %}

{% block meta %}
    <meta property="og:title" content="Mosaic" />
    <meta property="og:image" content="{{ url_for('export', id=picture.id, _external=True) }}" />
{% endblock %}

{% block style %}
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/showpic.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/render.css') }}">
{% endblock %}

{% block script %}
    <script>
        var exportImgUrl = '{{ url_for('export', id=picture.id) }}';
        require(['pages/render/render'], function(render) {
            render({{ picture.id }}, {{ fragments | safe }}, exportImgUrl);
        })
    </script>
{% endblock %}

{% block body %}
    <div id="leftColumn">
        <div id="preview">
            <img src="{{ url_for('preview', id=picture.id) }}" />
            <button id="deleteButton">Delete</button>
        </div>


        <div id="startPanel" class="panel">
            <button id="startButton" class="button">Start</button>
        </div>

        <div id="resumePanel" class="panel">
            <p class="status">Paused</p>
            <p class="accuracy">Accuracy*:</p>
            <p class="accuracyPercentage">0.0%</p>
            <button id="resumeButton" class="button">Resume</button>
            <p class="hint">
                <i>* Accuracy can never reach 100%. Stop compiling when the picture looks good</i>
            </p>
        </div>

        <div id="processingPanel" class="panel">
            <p class="status">
                Compiling
                <img src="{{ url_for('static', filename='img/ajax-loader.gif') }}" />
            </p>
            <p class="accuracy">Accuracy*:</p>
            <p class="accuracyPercentage">0.0%</p>
            <button id="pauseButton" class="button">Pause</button>
            <p class="hint">
                <i>* Accuracy can never reach 100%. Stop compiling when the picture looks good</i>
            </p>
        </div>

        <div id="completePanel" class="panel">
            <p class="status">Complete</p>
            <p class="accuracy">Accuracy:</p>
            <p class="accuracyPercentage">100.0%</p>
        </div>

        <div id="interruptionPanel" class="panel">
            <p class="status">Interrupted</p>
            <p class="accuracy">Accuracy:</p>
            <p class="accuracyPercentage">50.0%</p>
            <p class="hint">
                Unfortunately there is no enough pictures to complete the process.
            </p>
        </div>
    </div>
    <div id="rightColumn">
        <div id="mainPhoto" class="width{{ picture.fragment_width() }} height{{ picture.fragment_height() }}">
            <div id="mainBackground" url="{{ url_for('export', id=picture.id) }}"></div>
        </div>
    </div>

    <a href="{{ url_for('index') }}" id="allPictures" title="All photos" class="button">‚Üê</a>

    <div id="zoom">
        <div id="username"></div>
    </div>
{% endblock %}
