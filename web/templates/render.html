{% extends "layout.html" %}

{% block style %}
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/render.css') }}">
{% endblock %}

{% block script %}
    <script>
        {% if g.authorized %}
            require(['render'], function(render) {
                render('{{ access_token }}', {{ picture.id }}, {{ pixels | safe }});
            })
        {% else %}
            require(['showpazzle'], function(showpazzle) {
                showpazzle({{ picture.id }}, {{ pixels | safe }});
            })
        {% endif %}
    </script>
{% endblock %}

{% block body %}
    <div id="leftColumn">
        {% if g.authorized %}
            <div id="preview">
                <img src="{{ url_for('preview', id=picture.id) }}" />
            </div>
            <div id="tagForm">
                <input type="text" value="{{ picture.tag if picture.tag else 'enter_tag_before_start' }}" id="tagName" {% if picture.tag != None %}disabled="disabled"{% endif %} />
                <span>#</span>
            </div>

            <div id="buttonGroup">
                <div id="startButton" class="button" disabled="disabled">Start</div>
                <div id="stopButton" class="button" disabled="disabled">Stop</div>
            </div>

            <div id="accuracyContainer">
                Accuracy
                <p>
                    <span id="accuracy">loading...</span>
                </p>
            </div>

            <div id="otherActions">
                You can also
                <div id="clearButton" class="button">clear</div> the picture and start again with another tag or
                <div id="deleteButton" class="button">delete it</div>
            </div>
        {% else %}
            <p>
                <a href="https://instagram.com/{{ picture.user.insta_name }}" id="author" target="_blank">
                    @{{ picture.user.insta_name }}
                </a>
            </p>
            {% if picture.tag %}
                <p id="tagName">#{{ picture.tag }}</p>
            {% endif %}
        {% endif %}
    </div>
    <div id="rightColumn">
        <div id="mainPhoto"></div>
    </div>
    {% if g.authorized %}
        <a href="{{ url_for('index') }}" id="allPictures" title="All photos" class="button">‚Üê</a>
    {% endif %}
{% endblock %}